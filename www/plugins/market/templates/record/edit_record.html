<ion-view left-buttons="leftButtons" id="editMarket">
  <ion-nav-title>
    <span class="visible-xs" ng-if="id" ng-bind-html="formData.title"></span>
    <span class="visible-xs" ng-if="!id && formData.type">{{'MARKET.EDIT.' + formData.type + '.TITLE_NEW'|upper|translate}}</span>
  </ion-nav-title>

  <ion-nav-buttons side="secondary">
        <button class="button button-clear button-icon icon visible-xs visible-sm"
                ng-class="{'ion-android-send':!id, 'ion-android-done': id}"
                ng-click="save()">
        </button>
    </ion-nav-buttons>

    <ion-content scroll="true">

      <div class="row no-padding">

        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>

        <div class="col">

          <form name="recordForm" novalidate="" ng-submit="save()">
            <div class="list {{::motion.ionListClass}}" ng-init="setForm(recordForm)">

              <div class="item hidden-xs item-text-wrap">
                <h1 ng-if="id" ng-bind-html="formData.title"></h1>
                <h1 ng-if="!id && formData.type">{{'MARKET.EDIT.' + formData.type + '.TITLE_NEW'|upper|translate}}</h1>

              </div>
              <div class="item" ng-if="id||options.type.show">
                <h4 class="gray" ng-if="id">
                  <i class="icon ion-calendar"></i>
                  {{::'COMMON.LAST_MODIFICATION_DATE'|translate}}&nbsp;{{formData.time | formatDate}}
                </h4>
                <div class="badge badge-balanced"
                     ng-if="options.type.show"
                     ng-class="{'badge-editable': options.type.canEdit}"
                     ng-click="options.type.canEdit ? showRecordTypeModal() : ''" >
                  <span>{{'MARKET.TYPE.'+formData.type|upper|translate}}</span>
                </div>
              </div>

              <!-- pictures -->
              <ng-include src="::'plugins/es/templates/common/edit_pictures.html'"></ng-include>

              <!-- form content -->
              <ng-include ng-if="formData.type" src="::'plugins/market/templates/record/form_record_'+formData.type+'.html'"></ng-include>

              <div class="item item-divider" translate>MARKET.EDIT.MODERATION.DIVIDER</div>

              <ion-checkbox
                      ng-model="formData.allowComments"
                      class="item item-border-large">
                <div class="item-content" translate>
                  MARKET.EDIT.MODERATION.ENABLE_COMMENTS
                </div>
              </ion-checkbox>

              <!-- buttons -->
              <div class="item padding hidden-xs hidden-sm text-right">
                <button class="button button-clear button-dark ink" ng-click="cancel()" type="button" translate>
                  COMMON.BTN_CANCEL
                </button>
                <button class="button button-positive button-raised ink" type="submit" ng-if="!id" translate>
                  COMMON.BTN_PUBLISH
                </button>
                <button class="button button-assertive button-raised ink" type="submit" ng-if="id" translate>
                  COMMON.BTN_SAVE
                </button>
              </div>
            </div>
          </form>
        </div>

        <div class="col col-20 hidden-xs hidden-sm">&nbsp;</div>

      </div>
    </div>
  </ion-content>
</ion-view>
